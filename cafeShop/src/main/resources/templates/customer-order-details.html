<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head}"></head>
<body class="bg-gray-50">
  <div th:replace="~{fragments/simple-header :: simple-header}"></div>

  <section class="py-20">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <a th:href="@{/customer/orders}" class="text-yellow-600 hover:underline mb-6 inline-block">&larr; Back to Order History</a>

        <div class="bg-white p-8 rounded-2xl shadow-lg">
          <!-- Order Header -->
          <div class="flex flex-col sm:flex-row justify-between sm:items-center border-b pb-4 mb-6">
            <div>
              <h1 class="text-2xl font-bold text-gray-800">Order Details</h1>
              <p class="text-gray-500 text-sm">
                Order #<span th:text="${order.id}">12345</span> &bull;
                <span th:text="${#temporals.format(order.orderDate, 'dd MMMM yyyy')}">01 January 2024</span>
              </p>
            </div>
            <div class="mt-4 sm:mt-0 text-right">
              <p class="text-gray-500">Status</p>
              <span class="px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full"
                    th:text="${order.status}"
                    th:classappend="${order.status.name() == 'COMPLETED' ? 'bg-green-100 text-green-800' : (order.status.name() == 'CANCELLED' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800')}">
                Pending
              </span>
            </div>
          </div>

          <!-- Order Items -->
          <div class="space-y-6">
            <div th:each="item : ${order.orderItems}" class="flex items-center gap-4">
              <img th:src="${item.product.imageUrl}" th:alt="${item.product.name}" class="w-20 h-20 object-cover rounded-lg">
              <div class="flex-grow">
                <h4 class="font-semibold text-gray-800" th:text="${item.product.name}">Product Name</h4>
                <p class="text-sm text-gray-500">
                  <span th:text="${item.quantity}">1</span> x $<span th:text="${#numbers.formatDecimal(item.priceAtTimeOfOrder, 1, 2)}">9.99</span>
                </p>
                <p class="text-sm text-gray-500" th:if="${item.size != null}">
                  Size: <span th:text="${item.size}">Medium</span>
                </p>
                <p class="text-sm text-gray-500" th:if="${item.note != null and !item.note.isEmpty()}">
                  Note: <span th:text="${item.note}">Extra shot</span>
                </p>
              </div>
              <div class="font-semibold text-gray-800">
                $<span th:text="${#numbers.formatDecimal(item.priceAtTimeOfOrder * item.quantity, 1, 2)}">9.99</span>
              </div>
            </div>
          </div>

          <!-- Order Summary -->
          <div class="border-t mt-6 pt-6 space-y-2">
            <div class="flex justify-between text-gray-600">
              <span>Subtotal</span>
              <span th:text="'$' + ${#numbers.formatDecimal(order.totalPrice, 1, 2)}">$99.99</span>
            </div>
            <div class="flex justify-between text-gray-600">
              <span>Shipping</span>
              <span>FREE</span>
            </div>
            <div class="flex justify-between font-bold text-xl text-gray-800 mt-2">
              <span>Total</span>
              <span th:text="'$' + ${#numbers.formatDecimal(order.totalPrice, 1, 2)}">$99.99</span>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>